<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Boss deployer link management</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="/socket.io/socket.io.js"></script>
    <script>
        var raspyConnected = false;
        var cdConnected = false;

        var socket = io.connect('http://smarla.com:8000');

        // Login the UI
        socket.emit('login', { name: 'ui' });

        socket.on('ui', function (data) {
            switch(data.operation) {
                case 'login':
                    switch(data.data.device) {
                        case 'raspberry':
                            raspyConnected = true;
                            break;
                        case 'cd':
                            cdConnected = true;
                            break;
                    }
                    break;
            }

            render();
        });

        function render() {
            var raspyItem = document.getElementById('device_raspberry');
            var cdItem = document.getElementById('device_cd');

            raspyItem.style.opacity = 0.3;
            cdItem.style.opacity = 0.3;

            if(raspyConnected) raspyItem.style.opacity = 1;
            if(cdConnected) cdItem.style.opacity = 1;
        }

        window.onload = function() {
            render();
        }
    </script>

    <style>
        h1 {
            color: #444;
            margin-bottom: 2em;
        }

        .pipeline-status-wrapper {
            margin-top: 4em;
        }

        .pipeline-status {
            font-size: 2em;
            text-transform: uppercase;
        }

        .status-free {
            color: green;
        }

        .device {
            margin: 0.5em 1em;
        }

    </style>
</head>
<body>

    <div class="wrapper">
        <div class="row">
            <div class="col-xs-12 text-center">
                <h1>Boss deployer - Link management</h1>
            </div>
        </div>

        <div class="row">
            <div class="col-xs-6 text-right">
                <div class="device" id="device_raspberry">
                    <img src="https://www.raspberrypi.org/wp-content/uploads/2015/08/raspberry-pi-logo.png" height="200">
                </div>
            </div>
            <div class="col-xs-6 text-left">
                <div class="device" id="device_cd">
                    <img src="https://pbs.twimg.com/profile_images/714899641628753920/3C8UrVPf.jpg" height="200">
                </div>
            </div>
        </div>

        <div class="row pipeline-status-wrapper">
            <div class="col-xs-12 text-center">
                <span class="text-muted">
                    Pipeline status
                </span>
                <br />
                <span class="pipeline-status status-free">
                    FREE
                </span>
            </div>
        </div>
    </div>

</body>
</html>